# Yam::HTTP
***A simple to use, yet efficient, modern C++ HTTP server library***

## Installation
### Install prerequisites
Assuming you're on Ubuntu/Debian,

```bash
$ sudo apt-get install cmake libgtest-dev
```

### Compile & Run

```bash
$ git clone https://github.com/ymarcov/http
$ cd http
$ git submodule update --init
$ cmake .
$ make
$ bin/hello_world
```

Then connect to `http://localhost:3000` from your browser.

## Documentation (Doxygen)
Documentation may be generated by running ```doxygen Doxyfile```.\

## Example Code (Hello World)

```c++
class HelloWorldChannel : public ChannelBase {
    // Use constructors from ChannelBase
    using ChannelBase::ChannelBase;

    // Process incoming requests
    Control Process() override {
        GetResponder().SetContent(CreateHtml());
        GetResponder().SetField("Content-Type", "text/html");
        return SendResponse(Status::Ok);
    }

    std::shared_ptr<std::vector<char>> CreateHtml() const {
        auto text = std::string("<u><b>Hello world!</b></u>\n");
        return std::make_shared<std::vector<char>>(begin(text), end(text));
    }
};

class HelloWorldChannelFactory : public ChannelFactory {
    std::unique_ptr<ChannelBase> CreateChannel(std::shared_ptr<FileStream> fs,
                                               Channel::Throttlers throttlers) override {
        return std::make_unique<HelloWorldChannel>(std::move(fs), std::move(throttlers));
    }
};

int main() {
    auto endpoint = IPEndpoint({127, 0, 0, 1}, 3000);
    auto factory = std::make_unique<HelloWorldChannelFactory>();
    auto processingThreads = 1;

    HttpServer server(endpoint, std::move(factory), processingThreads);
    Log::Default()->SetLevel(Log::Level::Info);
    server.Start().wait();
}
```
